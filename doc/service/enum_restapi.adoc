:includedir: ../..
:relrootdir: ../..
:restdocdir: {includedir}/lib/backend-data/build/generated-snippets
= Enum REST API

REST-API for managing configurable enumerations in the pet clinic application.
It provides operations to create, update, and retrieve enumeration values organized by art (discriminator).
Each enumeration type is identified by an art (discriminator) and contains ordered items with unique numeric codes, names, and display texts.

TIP: This API uses a custom controller, not the standard endpoints provided by Spring Data REST. 

== Model

=== Enum

The main entity of an _Enum_ managed by this controller for persistence.

.Liquibase
[source,xml,options="nowrap"]
----
include::{includedir}/lib/backend-data/src/main/resources/liquibase/v1/enum.xml[]
----

The entity class extends `JsonJpaEntity` which provides unique identifier and version for optimistic locking.
Each enum represents an extensible enumeration item.
Enums are organized by discriminator for logical grouping (e.g., "SPECIES", "SKILL").
Within each discriminator group, numeric codes and names must be unique.

TIP: The discriminator is called `art`.
This is a historical flaw.
For clarity we use the term _discriminator_ instead.

.Entity
[source,java,options="nowrap"]
----
include::{includedir}/lib/backend-api/src/main/java/esy/api/basis/Enum.java[indent=0,tags=properties]
----

A simplified representation of an _Enum_ for item selection purposes.

.Item
[source,java,options="nowrap"]
----
include::{includedir}/lib/backend-api/src/main/java/esy/api/basis/EnumItem.java[indent=0,tags=properties]
----

== Operations

=== `POST /api/enum/{art}`

This operation creates a new _Enum_ entity for a discriminator.
Response is of type _EnumItem_.

****

.Command
include::{restdocdir}/post-api-enum/curl-request.adoc[]

.Request
include::{restdocdir}/post-api-enum/http-request.adoc[]

.Response
include::{restdocdir}/post-api-enum/response-body.adoc[]

****

This operation reports `Created` or code 201 if the entity was successfully created.

This operation reports `Bad Request` or code 400 if the data was not processed.

This operation reports `Conflict` or code 409 if a unique constraint would be violated.

=== `PUT /api/enum/{art}/{code}`

This operation updates an existing _Enum_ entity for a discriminator and code.
Response is of type _EnumItem_.

****

.Command
include::{restdocdir}/put-api-enum/curl-request.adoc[]

.Request
include::{restdocdir}/put-api-enum/http-request.adoc[]

.Response
include::{restdocdir}/put-api-enum/response-body.adoc[]

****

This operation reports `Ok` or code 200 if the entity was successfully updated.

This operation reports `Not Found` or code 404 if the entity does not exist.

This operation reports `Bad Request` or code 400 if the data was not processed.

This operation reports `Conflict` or code 409 if a unique constraint would be violated.

=== `GET /api/enum/{art}`

This operation returns all persisted _Enum_ entities for a discriminator ordered by code.
Response is a collection of type _EnumItem_.

****

.Command
include::{restdocdir}/get-api-enum/curl-request.adoc[]

.Request
include::{restdocdir}/get-api-enum/http-request.adoc[]

.Response
include::{restdocdir}/get-api-enum/response-body.adoc[]

****

This operation reports `Ok` or code 200 if the data was successfully loaded.
The result can be empty if no enums exist for the discriminator.

=== `DELETE /api/enum/{art}/{code}`

This operation deletes a single persisted _Enum_ entity for a discriminator and code.
Response is of type _EnumItem_.

****

.Command
include::{restdocdir}/delete-api-enum/curl-request.adoc[]

.Request
include::{restdocdir}/delete-api-enum/http-request.adoc[]

.Response
include::{restdocdir}/delete-api-enum/response-body.adoc[]

****

This operation reports `Ok` or code 200 if the entity was successfully deleted.

This operation reports `Not Found` or code 404 if the entity does not exist.
