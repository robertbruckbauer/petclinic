:includedir: ../..
:relrootdir: ../..
:graphqldir: {includedir}/lib/backend-data/src/main/resources/graphql
= Pet GraphQL API

GraphQL API for querying pets in the pet clinic application.
It provides query operations to retrieve all pets or individual pets by identifier.

== Model

=== Pet

Each pet represents an animal owned by a client in the pet clinic with name, birth date and species.
The `name` attribute is required and unique per owner, allowing different owners to have pets with the same name.
The `born` attribute is required.
The `species` attribute is required.

The `owner` relation is required because every pet must belong to an owner.
The `owner` relation uses batch loading via `@BatchMapping` to efficiently load owners for multiple pets.

The `Pet` type defines properties and collections.
The schema uses the custom scalar type `LocalDate` which maps to Java's `java.time.LocalDate` type for representing calendar dates.

.Schema
[source,graphql,options="nowrap"]
----
include::{graphqldir}/pet.gqls[]
----

The `Pet` type corresponds to the entity class.

.Entity
[source,java,options="nowrap"]
----
include::{includedir}/lib/backend-api/src/main/java/esy/api/client/Pet.java[indent=0,tags=properties]
----

== Queries

=== Collection queries

==== `allPet`

This query returns all pets in the system.
It loads all pet entities in a single database query.

.Query Definition
[source,graphql,options="nowrap"]
----
allPet: [Pet]
----

*Returns:*

A list of all `Pet` objects.
Returns an empty list if no pets exist.

=== Object queries

==== `petById`

This query returns a single pet by its unique identifier.

.Query Definition
[source,graphql,options="nowrap"]
----
petById(id: ID!): Pet
----

*Arguments:*

`id` (ID, required)::
The unique identifier of the pet to retrieve.

*Returns:*

The `Pet` object with the specified ID, or `null` if no pet with that ID exists.
